jtype: BinaryPbIndexer # KV indexer to index docs key:doc.id, value:docs
with:
  index_filename: 'doc.gz'
metas:
  name: kv_indexer
  workspace: $JINA_WORKSPACE/indexed
requests:
  use_default: true
  on:
    SearchRequest:
      - jtype: ExcludeQL
        with:
          fields:
            - buffer
      - jtype: KVSearchDriver
        with:
          executor: kv_indexer
    IndexRequest:
      - jtype: ExcludeQL
        with:
          fields:
            - chunks
      #- jtype: URI2DataURI {} #URI2DataURI can convert local uri to data uri
      - jtype: ExcludeQL
        with:
          fields:
            - buffer
      - jtype: KVIndexDriver
        with:
          executor: kv_indexer